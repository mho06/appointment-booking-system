<!-- appointments/templates/appointments/appointment_list.html -->
{% extends 'appointments/base_generic.html' %}

{% block content %}
    <h1>Your Appointments</h1>

    {% if appointments %}
        <div class="appointment-list">
            {% for appointment in appointments %}
        <div class="appointment-card">
            <p><strong>Date:</strong> {{ appointment.date }}</p>
            <p><strong>Time:</strong> {{ appointment.time }}</p>
            <p><strong>Description:</strong> {{ appointment.description }}</p>
            <p><strong>Status:</strong> {{ appointment.status }}</p>

            {% if user.is_authenticated %}
                {% if user.is_superuser %}
                    <a href="{% url 'appointment_edit' appointment.id %}" class="btn-edit">Edit</a>
                    <a href="{% url 'appointment_delete' appointment.id %}" class="btn-delete">Delete</a>
                {% elif appointment.user == user and appointment.status != 'Canceled' %}
                    <a href="{% url 'appointment_cancel' appointment.id %}" class="btn-cancel">Cancel</a>
                {% endif %}
            {% endif %}
        </div>
        {% endfor %}

        </div>
    {% else %}
        <p class="no-appointments">You have no appointments yet.</p>
    {% endif %}

    <a href="{% url 'appointment_form' %}" class="btn">Book a new appointment</a>
{% endblock %}
